[주제 / 목적]

보험료 뿐만 아니라 통신비 등을 납부하는 방식에는 크게 두가지로 나눠볼 수 있을 것 같습니다.
첫번째는 자동이체로 매달 요금이 자신이 지정한 날짜에 이체되는 방법이 있을 것이고
두번째는 지정된 가상계좌를 통해 고객이 직접 요금을 납부하는 방식이 있을 것 입니다.

저는 요금을 납부하는 방식 중 "가상계좌"를 통해 입금을 하며 
입금 내역을 구현해보기로 했습니다.

은행마다 가상으로 부여된 계좌번호로 입금한다는 가정하에 
누가 입금을 했는지 , 얼마를 냈는지 또, 며칠날 입금을 했는지에 
따른 데이터를 전처리 과정을 통해 가공하였습니다.
그리고 , 메뉴 순서에 따라  보이는 형식을 달리하여 구현하고자 하였습니다.

[클래스 다이어그램]

클래스는 총 4개로 이루어져 있고 

메인이 되는 메인 클래스와 
전처리 과정을 통해 데이터를 가공하는 클래스인 preprocessing 클래스 
메인클래스를 실행할 때 도와주고 관리하는 역할인 premiumManagement 클래스
데이터 정보를 저장하는 bean클래스인 premium 클래스로 나누어져 있습니다.

이때 , 전처리를 해주는 preprocessing 클래스는 스레드로 구현하여 
메인 클래스만 실행해도 전처리를 같이 실행될 수 있도록 구현하였습니다. 


[구현 목표]
구현 목표는 크게 3가지로 두었습니다.
첫번째는 멀티 스레드 방식을 이용하고자 하였고
두번째는 가상계좌 입금내역을 출력 할 때 이름은 개인정보이다 보니 이름 중간에 별표처리를 하여 숨기는 방식을 하고자 했습니다.
세번째는 은행, 계좌 , 날짜 별로 콘솔창에 즉각적으로 해당하는 거래내역이 확인이 가능하도록 하여 목표를 세웠습니다.

[멀티스레드-코드리뷰]
저는 Runnable 인터페이스를 전처리 담당을 하는 클래스인 preprocessing 이 상속받게끔 하였으며 
구현 객체를 생성하고 그 객체를 매개변수로 해서 스레드생성자의 매개변수로 넣어 동작하게 하였습니다.

메인 클래스만 실행 시켜도 자동으로 전처리 가공도 함께 실행 되게 구현 했고 
여기서 조건은 1초에 한번씩 처리 되도록 하였습니다.

메뉴 선택에 대한 코드리뷰는 7개 중 크게 3가지만 발표하겠습니다.

[먼저 , 개인정보 숨기기 부분 입니다.]
2번 메뉴에 해당하는 부분만 숨기기 기능이 실행 될 수 있도록 하였는데  
스캐너를 통해 입력한 정수는 menu변수에 담았고 스태틱 변수로 만들었습니다.
if else 구문을 사용했으며
이름 첫글자  , 이름 중간 , 이름 마지막 글자를 substring 메소드로 각각 나눴습니다.

이름이 2글자인 경우가 있고 
이름이 3글자 이상인 경우가 있으니 조건을 달리하여 코딩하였습니다.

이름이 3글자이상인 경우 for문을 돌려 성과 끝글자를 제외한 중간 글자에 *로 출력되도록 코딩하였고 
2번 메뉴를 선택을 하면 성명이라는 변수에 어떠한 문자가 들어와도 
무조건 첫글자와 마지막 글자를 제외한 나머지 글자는 별표처리가 되도록 하였습니다.

문자열을 합치는  concat 메소드로 최종적으로 문자열이 출력되도록 구현하였습니다.


[날짜별 그룹핑 부분 입니다]
각각 보험료가 들어오는 일자는 다를 것이고 날짜를 통해 은행별로 총 얼마씩 들어오는지를 코딩한 부분입니다.
전체 리스트에서 해당하는 일자를 추출해야하니 Datadeposit  메소드를 활용했으며

내가 입력한 날짜가 존재를 하면 Map 자료구조에 은행명과 보험료 금액을 담았습니다.
totalgrouping 메소드를 호출하여 자신이 입력한 날짜에 해당하는 부분을 map 객체에 담았고 
담았던 map 부분에 기존 은행명이 존재하면 금액만 추가로 합쳐지도록 구현하였습니다.

이부분이 시연했을 때 부분인데 
10월 30일에 입금한 내역을 입력하고 날짜에 따라 은행과 금액을 그룹핑 하여 
맨 밑 부분엔 은행마다 들어온 전체 금액을 출력하였습니다.

[가상계좌 찾기 부분입니다]

이것도 마찬가지로 해당 이름과 생년월일 6자리를 입력받았으며 
해당 이름과 생년월일이 한 행에 모두 존재를 한다고 할 때 
account 라는 객체가 pre객체를 참조하고 리턴값으로 반환하였습니다.

반환값을 리턴받고 3번째인 account 라는 메소드를 호출하여 해당 가상계좌 번호를 출력하도록 하였습니다.

시연을 하면 해당하는 이름 , 생년월일이 존재 하지 않을 경우 가상계좌 번호가 존재하지 않다고 나오며
리스트에 해당하는 이름, 생년월일이 존재하면 거기에 맞는 계좌번호값이 출력되게 됩니다.

[은행별 내역 보기부분입니다.]
은행명을 입력 받고 그 은행명을 매개변수로 하여 selectbank 메소드를 호출 하였으며 
sublist 라는 list 자료 구조의 객체를 만들어 내가 입력했던 은행명이 존재하면 
add 메소드를 이용해 해당 내역을 추가하였습니다.

sublist 객체를 리턴하고 실행을 시키면 

해당 이름을 입력했을때 우리은행 , 국민은행 등등에 해당하는 내역이 출력되게 됩니다.

[추가구현] 부분 입니다.
저는 보험료를 입금하면 정상적으로 잘 내고 있는지 , 연체상태인지 , 아니면 아예 실효가 된 상태인지를 나타내었습니다.
date 클래스와 simpledateformat 클래스를 이용하여 현재 월도를 구했고 
이번달이 2020년 11월이니까 이 월도에서 입금월도 컬럼값을 뺏을때 
3개월 이상 차이가 나면 "실효"
2개월 차이이면 "연체"
1개월이던 0개월이던 차이이면 "정상" 상태로 처리했습니다.


메뉴를 선택하는 부분에서 순차적으로 1번부터 7번까지 메뉴가 출력될 수 있도록 나타내었습니다.
1번은 전체보기 , 2번은 개인정보 숨기기 이런식으로 map구조를 활용할 수도 있었지만
그렇게 하였을 때 순서가 없이 출력되기 때문에 map구조
저는 따로 메뉴텍스트 파일을 불러오는 menuPrint 메소드를 만들었고 
반복문에서 호출을 계속 시켰습니다.
bufferedReader 스트림으로 메뉴 txt파일을 불러오고 계속 반복적으로 한줄씩 출력하도록 구현하였습니다.


